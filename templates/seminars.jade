extends layout

mixin author(authorName)
  - var author = contents.authors[authorName + '.json']
  a.photo(href='#')
    img.img-circle(src=author.metadata.photo, width=100)
  p
    span.author
      if author
        a(href='mailto:'+author.metadata.email)= author.metadata.name
      else
        =authorName
    | &nbsp;
    = author.metadata.bio
    | &nbsp;
    a(href=author.metadata.homepage) More about meâ†’
  .clearfix

block prepend title
  | #{page.title + " - "}

block content
  section
    h1 Seminars
    p.lead
      | Learn about each other's research, present and discuss new ideas, share your experience.

    - var seminars = _.chain(contents.seminars._.directories).map(function(item) {
    -   return item.index
    - }).compact().groupBy(function(item) {
    -   return item.date.getFullYear()
    - }).value()
    - var years = _.chain(seminars).keys().reverse().value()

    each year in years
      each seminar in _.sortBy(seminars[year], function(item) { return -item.date })
        article.event
          header
            p.date
              span= moment.utc(seminar.metadata.date).format('MMM Do, YYYY, h:mm a')
              |  in  
              = seminar.metadata.room
            h2
              a(href=seminar.url)= seminar.title
          section.content
            !{ typogr(seminar.intro).typogrify() }
            include includes/disqus
            a(href=seminar.url + '#disqus_thread', data-disqus-identifier=seminar.url) Link
          .meta
            if seminar.metadata.author instanceof Array
              each author in seminar.metadata.author
                +author(author)
            else
              +author(seminar.metadata.author)
        .clearfix

    p.back
      a(href='#') Back To Top

block append scripts
  include includes/disqus
  +disqus_script('imperialacm')
